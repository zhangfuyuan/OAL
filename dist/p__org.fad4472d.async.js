(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{Ls8o:function(e,t,a){e.exports={myPageHeaderWrapper:"antd-pro-pages-org-style-myPageHeaderWrapper",tableList:"antd-pro-pages-org-style-tableList",tableListOperator:"antd-pro-pages-org-style-tableListOperator",tableListForm:"antd-pro-pages-org-style-tableListForm",submitButtons:"antd-pro-pages-org-style-submitButtons",card:"antd-pro-pages-org-style-card"}},MybA:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var o=l(a("kLXV")),r=l(a("q1tI")),n=a("Y2fQ"),s=function(e){var t=e.orgBean,a=e.visible,l=e.handleSubmit,s=e.handleCancel,d=e.confirmLoading;return r.default.createElement(o.default,{destroyOnClose:!0,title:(0,n.formatMessage)({id:"oal.org.resetPassword"}),visible:a,onOk:l,confirmLoading:d,onCancel:s,maskClosable:!1,okText:(0,n.formatMessage)({id:"oal.common.reset"}),cancelText:(0,n.formatMessage)({id:"oal.common.cancel"})},r.default.createElement("p",null,r.default.createElement(n.FormattedMessage,{id:"oal.org.resetPasswordConfirm",values:{org:t.name}})))},d=s;t.default=d},ep4z:function(e,t,a){"use strict";var l=a("g09b"),o=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("14J3");var n=l(a("BMrR"));a("+L6B");var s=l(a("2/Rp"));a("jCWc");var d=l(a("kPKH"));a("5NDa");var c=l(a("5rEg"));a("miYZ");var i=l(a("tsqr"));a("/zsF");var u=l(a("PArb"));a("Awhp");var m=l(a("KrTs")),f=l(a("p0pE")),g=l(a("2Taf")),p=l(a("vZ4D")),h=l(a("l4Ni")),M=l(a("ujKo")),b=l(a("MhPg"));a("OaEy");var E=l(a("2fM7"));a("y8nQ");var y,v,O,S=l(a("Vl3Y")),w=o(a("q1tI")),L=a("Hx5s"),x=a("MuoO"),F=l(a("Ivs8")),k=l(a("til/")),C=l(a("xaOq")),P=l(a("MybA")),V=l(a("Ls8o")),N=l(a("mW0K")),A=a("Y2fQ"),R=a("+n12"),I=a("ydnR");function T(e){return function(){var t,a=(0,M.default)(e);if(_()){var l=(0,M.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,h.default)(this,t)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var q=S.default.Item,D=E.default.Option,B=["error","success"],U=["oal.common.disable","oal.common.enable"],W=(N.default.publicPath,y=(0,x.connect)(function(e){var t=e.org,a=e.loading;return{org:t,orgListLoading:a.effects["org/fetch"],addOrgLoading:a.effects["org/add"],updateOrgLoading:a.effects["org/update"],resetPswLoading:a.effects["org/resetPsw"]}}),y((O=function(e){(0,b.default)(a,e);var t=T(a);function a(){var e;(0,g.default)(this,a);for(var l=arguments.length,o=new Array(l),r=0;r<l;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),e.state={detailVisible:!1,resetVisible:!1,modalVisible:!1,formValues:{creator:(0,R.getPageQuery)().creator},selectedRows:[],selectedOrg:{},page:{current:1,pageSize:10}},e.loadOrgList=function(){var t=e.props.dispatch,a=e.state,l=a.page,o=a.formValues;t({type:"org/fetch",payload:(0,f.default)({},l,o)})},e.columns=function(){var t=[{title:(0,A.formatMessage)({id:"oal.org.orgName"}),dataIndex:"name",key:"name"},{title:(0,A.formatMessage)({id:"oal.common.status"}),dataIndex:"state",key:"state",render:function(e){return w.default.createElement(m.default,{status:B[e],text:U[e]&&(0,A.formatMessage)({id:U[e]})||"-"})}},{title:(0,A.formatMessage)({id:"oal.org.path"}),dataIndex:"path",key:"path",render:function(t,a){return w.default.createElement(w.Fragment,null,w.default.createElement("a",{onClick:function(){return e.openWin(a.path)}},a.path))}},{title:(0,A.formatMessage)({id:"oal.org.contacts"}),dataIndex:"contactName",key:"contactName",render:function(e,t){return w.default.createElement("span",null,t&&t.contact&&t.contact.nickName||"-")}},{title:(0,A.formatMessage)({id:"oal.common.handle"}),key:"handle",render:function(t,a){return w.default.createElement(w.Fragment,null,w.default.createElement("a",{key:"view",onClick:function(){return e.openDetailModal(a)}},w.default.createElement(A.FormattedMessage,{id:"oal.common.view"})),w.default.createElement(u.default,{type:"vertical"}),w.default.createElement("a",{key:"modify",onClick:function(){return e.moreAction("modify",a)}},w.default.createElement(A.FormattedMessage,{id:"oal.common.modify"})),w.default.createElement(u.default,{type:"vertical"}),w.default.createElement("a",{key:"resetPassword",onClick:function(){return e.openResetModal(a)}},w.default.createElement(A.FormattedMessage,{id:"oal.org.resetPassword"})),w.default.createElement(u.default,{type:"vertical"}),1===a.state?w.default.createElement("a",{key:"disable",onClick:function(){return e.moreAction("close",a)}},w.default.createElement(A.FormattedMessage,{id:"oal.common.disable"})):w.default.createElement("a",{key:"enable",onClick:function(){return e.moreAction("open",a)}},w.default.createElement(A.FormattedMessage,{id:"oal.common.enable"})))}}];return t},e.moreAction=function(t,a){"modify"===t?e.handleUpdateModalVisible(a):"open"===t?e.handleState(1,a._id):"close"===t&&e.handleState(0,a._id)},e.handleState=function(t,a){var l=e.props.dispatch;l({type:"org/handleState",payload:{orgId:a,state:t}}).then(function(t){t.res>0&&(i.default.success((0,A.formatMessage)({id:"oal.common.setSuccessfully"})),e.loadOrgList())})},e.openWin=function(t){localStorage.setItem(I.SYSTEM_PATH,t),e.props.dispatch({type:"login/logout",payload:{}})},e.handleSearch=function(){var t=e.props,a=t.form,l=(t.dispatch,e.state.page);a.validateFields(function(t,a){t||e.setState({page:(0,f.default)({},l,{current:1}),formValues:a,selectedRows:[]},function(){e.loadOrgList()})})},e.handleFormReset=function(){var t=e.props,a=t.form;t.dispatch;a.resetFields(),a.setFieldsValue({creator:""}),e.setState({page:{pageNo:1,pageSize:10,current:1},formValues:{creator:""},selectedRows:[]},function(){e.loadOrgList()})},e.openDetailModal=function(t){e.setState({detailVisible:!0,selectedOrg:t})},e.openResetModal=function(t){e.setState({resetVisible:!0,selectedOrg:t})},e.closeDetailModal=function(){e.setState({detailVisible:!1,selectedOrg:{}})},e.closeResetModal=function(){e.setState({resetVisible:!1,selectedOrg:{}})},e.submitCopy=function(){},e.submitReset=function(){var t=e.props.dispatch,a=e.state.selectedOrg;t({type:"org/resetPsw",payload:{orgId:a._id}}).then(function(t){t&&t.res>0&&(i.default.success((0,A.formatMessage)({id:"oal.org.resetSuccessfully"})),e.closeResetModal())})},e.handleUpdateModalVisible=function(t){e.setState({modalVisible:!0,selectedOrg:t})},e.toAdd=function(){e.setState({modalVisible:!0})},e.closeAddOrUpdateOrgModal=function(){e.setState({modalVisible:!1,selectedOrg:{}})},e.submitAddOrUpdateOrg=function(t,a){var l=e.props.dispatch,o=e.state.selectedOrg;o&&o._id?l({type:"org/update",payload:t}).then(function(t){t&&t.res>0&&(i.default.success((0,A.formatMessage)({id:"oal.common.modifySuccessfully"})),e.closeAddOrUpdateOrgModal(),e.loadOrgList(),a())}):l({type:"org/add",payload:t}).then(function(t){t&&t.res>0&&(i.default.success((0,A.formatMessage)({id:"oal.face.addSuccessfully"})),e.closeAddOrUpdateOrgModal(),e.loadOrgList(),a())})},e.renderSimpleForm=function(){var t=e.props,a=t.form,l=t.orgListLoading,o=(e.state.formValues,a.getFieldDecorator);return w.default.createElement(S.default,{layout:"inline"},w.default.createElement(n.default,{gutter:{md:4,lg:12,xl:24}},w.default.createElement(d.default,{xxl:5,xl:7,lg:10,md:10,sm:24},w.default.createElement(q,{label:(0,A.formatMessage)({id:"oal.org.orgName"})},o("name")(w.default.createElement(c.default,{placeholder:(0,A.formatMessage)({id:"oal.org.enterOrgName"})})))),w.default.createElement(d.default,{xxl:5,xl:6,lg:8,md:8,sm:24},w.default.createElement(q,{label:(0,A.formatMessage)({id:"oal.org.path"})},o("path")(w.default.createElement(c.default,{placeholder:(0,A.formatMessage)({id:"oal.org.enterPath"})})))),w.default.createElement(d.default,{xxl:4,xl:5,lg:5,md:5,sm:24},w.default.createElement(q,{label:(0,A.formatMessage)({id:"oal.common.status"})},o("state",{initialValue:""})(w.default.createElement(E.default,{placeholder:(0,A.formatMessage)({id:"oal.common.pleaseSelect"}),style:{width:"100%"}},w.default.createElement(D,{value:""},w.default.createElement(A.FormattedMessage,{id:"oal.common.all"})),w.default.createElement(D,{value:"1"},w.default.createElement(A.FormattedMessage,{id:"oal.common.enable"})),w.default.createElement(D,{value:"0"},w.default.createElement(A.FormattedMessage,{id:"oal.common.disable"})))))),w.default.createElement(d.default,{xxl:5,lg:6,md:6,sm:24},w.default.createElement("span",{className:V.default.submitButtons},w.default.createElement(s.default,{onClick:e.handleSearch,type:"primary",htmlType:"submit",loading:l},w.default.createElement(A.FormattedMessage,{id:"oal.face.search"})),w.default.createElement(s.default,{style:{marginLeft:8},loading:l,onClick:e.handleFormReset},w.default.createElement(A.FormattedMessage,{id:"oal.common.reset"}))))))},e.handleSelectRows=function(t){e.setState({selectedRows:t})},e.handleStandardTableChange=function(t){e.setState({page:{current:t.current,pageSize:t.pageSize},selectedRows:[]},function(){e.loadOrgList()})},e.org_showTotal=function(e,t){return(0,A.formatMessage)({id:"oal.org.currentToTotal"},{total:e})},e}return(0,p.default)(a,[{key:"componentDidMount",value:function(){this.loadOrgList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.org.orgList,l=t.orgListLoading,o=t.addOrgLoading,n=t.updateOrgLoading,d=t.resetPswLoading;a&&a.pagination&&(a.pagination.showTotal=this.org_showTotal);var c=this.state,i=c.selectedRows,u=c.modalVisible,m=c.selectedOrg,f=c.detailVisible,g=c.resetVisible;return w.default.createElement(L.PageHeaderWrapper,{className:V.default.myPageHeaderWrapper},w.default.createElement(r.default,{bordered:!1},w.default.createElement("div",{className:V.default.tableList},w.default.createElement("div",{className:V.default.tableListForm},this.renderSimpleForm()),w.default.createElement("div",{className:V.default.tableListOperator},w.default.createElement(s.default,{icon:"plus",type:"primary",onClick:function(){return e.toAdd()}},w.default.createElement(A.FormattedMessage,{id:"oal.face.add"}))),w.default.createElement(F.default,{rowKey:function(e){return e._id},needRowSelection:!1,selectedRows:i,loading:l,data:a,columns:this.columns(),onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),w.default.createElement(k.default,{confirmLoading:o||n,visible:u,orgBean:m,handleCancel:this.closeAddOrUpdateOrgModal,handleSubmit:this.submitAddOrUpdateOrg}),w.default.createElement(C.default,{visible:f,orgBean:m,handleCancel:this.closeDetailModal,handleSubmit:this.submitCopy}),w.default.createElement(P.default,{visible:g,orgBean:m,confirmLoading:d,handleCancel:this.closeResetModal,handleSubmit:this.submitReset}))}}]),a}(w.Component),v=O))||v),z=S.default.create()(W);t.default=z},"til/":function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var o=l(a("kLXV"));a("5Dmo");var r=l(a("3S7+"));a("Pwec");var n=l(a("CtXQ"));a("y8nQ");var s=l(a("Vl3Y"));a("5NDa");var d=l(a("5rEg")),c=l(a("q1tI")),i=a("Y2fQ"),u=l(a("mW0K")),m=u.default.publicPath,f={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},g=function(e){var t=e.form,a=e.orgBean,l=e.visible,u=e.handleSubmit,g=e.confirmLoading,p=e.handleCancel,h=t.getFieldDecorator,M=!(!a||!a._id),b=(0,i.formatMessage)({id:"oal.org.newOrg"});M&&(b=(0,i.formatMessage)({id:"oal.org.modifyOrg"}));var E=function(){t.validateFields(function(e,l){if(!e){var o=l;M&&(o.orgId=a._id),u(o,function(){t.resetFields()})}})},y=function(e,t,a){var l=/^[\d\*\#\+]{1,14}$/;t&&!l.test(t)&&a((0,i.formatMessage)({id:"oal.common.formatError"})),a()},v=function(e,t,a){var l=/^[A-Za-z]+$/;t&&!l.test(t)&&a((0,i.formatMessage)({id:"oal.org.enterEnglishString"})),a()};return c.default.createElement(o.default,{destroyOnClose:!0,title:b,visible:l,width:"50%",onOk:E,confirmLoading:g,onCancel:p,maskClosable:!1},c.default.createElement(s.default,f,c.default.createElement(s.default.Item,{label:(0,i.formatMessage)({id:"oal.org.orgName"})},h("orgName",{rules:[{required:!0,message:(0,i.formatMessage)({id:"oal.org.enterOrgNameTips"})},{max:40,message:(0,i.formatMessage)({id:"oal.common.maxLength"},{num:"40"})}],initialValue:a&&a.name||""})(c.default.createElement(d.default,{placeholder:(0,i.formatMessage)({id:"oal.org.orgName"})}))),c.default.createElement(s.default.Item,{label:(0,i.formatMessage)({id:"oal.settings.sysname"})},h("saasName",{rules:[{required:!0,message:(0,i.formatMessage)({id:"oal.org.enterSaasNameTips"})},{max:40,message:(0,i.formatMessage)({id:"oal.common.maxLength"},{num:"20"})}],initialValue:a&&a.saasName||""})(c.default.createElement(d.default,{placeholder:(0,i.formatMessage)({id:"oal.settings.sysname"})}))),c.default.createElement(s.default.Item,{label:(0,i.formatMessage)({id:"oal.org.contacts"})},h("contactName",{rules:[{max:20,message:(0,i.formatMessage)({id:"oal.common.maxLength"},{num:"20"})}],initialValue:a&&a.contact&&a.contact.nickName||""})(c.default.createElement(d.default,{placeholder:(0,i.formatMessage)({id:"oal.org.contactName"})}))),c.default.createElement(s.default.Item,{label:(0,i.formatMessage)({id:"oal.common.phoneNumber"})},h("mobile",{rules:[{validator:y}],initialValue:a&&a.contact&&a.contact.mobile||""})(c.default.createElement(d.default,{placeholder:(0,i.formatMessage)({id:"oal.common.phoneNumber"})}))),c.default.createElement(s.default.Item,{label:c.default.createElement("span",null,c.default.createElement(i.FormattedMessage,{id:"oal.org.orgPath"}),"\xa0",c.default.createElement(r.default,{title:(0,i.formatMessage)({id:"oal.org.usersAccessAppTips"})},c.default.createElement(n.default,{type:"question-circle-o"}))),className:"oal-form-item",extra:"".concat((0,i.formatMessage)({id:"oal.org.accessPath"})," : ").concat(window.location.origin).concat(m,"user/").concat(t.getFieldValue("path")||"*","/login")},h("path",{rules:[{required:!0,message:(0,i.formatMessage)({id:"oal.org.enterPathTips"})},{max:10,message:(0,i.formatMessage)({id:"oal.common.maxLength"},{num:"10"})},{validator:v}],initialValue:a&&a.path||""})(c.default.createElement(d.default,{placeholder:(0,i.formatMessage)({id:"oal.org.orgPath"}),disabled:M})))))},p=s.default.create({name:"addOrUpdate"})(g),h=p;t.default=h},xaOq:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var o=l(a("kLXV"));a("/zsF");var r=l(a("PArb"));a("miYZ");var n=l(a("tsqr")),s=l(a("q1tI")),d=a("Y2fQ"),c=l(a("mW0K")),i=c.default.publicPath,u=function(e){var t=e.orgBean,a=e.visible,l=e.handleSubmit,c=e.handleCancel,u=(0,d.formatMessage)({id:"oal.org.orgUsersKnow"}),m=window.location.origin,f="".concat(m).concat(i,"user/").concat(t.path,"/login"),g="".concat((0,d.formatMessage)({id:"oal.org.accessAddress"})," : ").concat(f,"\n").concat((0,d.formatMessage)({id:"oal.org.loginAccount"})," : admin\n").concat((0,d.formatMessage)({id:"oal.org.initialPassword"})," : 123456"),p=function(){var e=document.getElementById("copyArea");e.select();try{document.execCommand("copy",!1,null)?(document.execCommand("Copy"),l(),n.default.success((0,d.formatMessage)({id:"oal.common.copySuccessfully"}))):n.default.error((0,d.formatMessage)({id:"oal.common.copyFailedTips"}))}catch(e){n.default.error((0,d.formatMessage)({id:"oal.common.copyFailedTips"}))}};return s.default.createElement(o.default,{destroyOnClose:!0,title:u,visible:a,onOk:p,onCancel:c,maskClosable:!1,okText:(0,d.formatMessage)({id:"oal.common.copy"}),cancelText:(0,d.formatMessage)({id:"oal.common.close"})},s.default.createElement("p",null,s.default.createElement(d.FormattedMessage,{id:"oal.org.orgName"})," : ",t.name),s.default.createElement("p",null,s.default.createElement(d.FormattedMessage,{id:"oal.org.contacts"})," : ",t.contact&&t.contact.nickName),s.default.createElement("p",null,s.default.createElement(d.FormattedMessage,{id:"oal.common.phoneNumber"})," : ",t.contact&&t.contact.mobile),s.default.createElement(r.default,null),s.default.createElement("p",null,s.default.createElement(d.FormattedMessage,{id:"oal.org.giveUserFollowingInfo"})," : "),s.default.createElement("p",null,s.default.createElement(d.FormattedMessage,{id:"oal.org.accessAddress"})," : ",f),s.default.createElement("p",null,s.default.createElement(d.FormattedMessage,{id:"oal.org.loginAccount"})," : admin"),s.default.createElement("p",null,s.default.createElement(d.FormattedMessage,{id:"oal.org.initialPassword"})," : 123456"),s.default.createElement("textarea",{cols:"40",rows:"5",id:"copyArea",defaultValue:g,style:{position:"absolute",top:"-999px",left:"-999px"}}))},m=u;t.default=m}}]);