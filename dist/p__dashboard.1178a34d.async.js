(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{Bxz1:function(e,t,a){e.exports={myPageHeaderWrapper:"antd-pro-pages-dashboard-style-myPageHeaderWrapper",main:"antd-pro-pages-dashboard-style-main",left:"antd-pro-pages-dashboard-style-left",right:"antd-pro-pages-dashboard-style-right",tableListOperator:"antd-pro-pages-dashboard-style-tableListOperator",tableListForm:"antd-pro-pages-dashboard-style-tableListForm",submitButtons:"antd-pro-pages-dashboard-style-submitButtons",card:"antd-pro-pages-dashboard-style-card"}},UqUe:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("T2oS");var o=l(a("W9HT"));a("5Dmo");var d=l(a("3S7+"));a("14J3");var s=l(a("BMrR"));a("+L6B");var i=l(a("2/Rp"));a("jCWc");var u=l(a("kPKH"));a("5NDa");var c=l(a("5rEg"));a("/zsF");var f=l(a("PArb"));a("Awhp");var m=l(a("KrTs"));a("qVdP");var p=l(a("jsC+"));a("Pwec");var g=l(a("CtXQ"));a("lUTK");var h=l(a("BvKs")),E=l(a("p0pE")),b=l(a("jehZ")),y=l(a("gWZ8")),v=l(a("2Taf")),_=l(a("vZ4D")),M=l(a("l4Ni")),S=l(a("ujKo")),k=l(a("MhPg"));a("OaEy");var x=l(a("2fM7"));a("y8nQ");var I=l(a("Vl3Y"));a("ozfa");var w,D,R,T=l(a("MJZm")),F=n(a("q1tI")),L=a("Hx5s"),N=(l(a("3a4m")),l(a("wY1l")),a("Y2fQ")),C=a("MuoO"),P=(a("LvDl"),l(a("wd/R")),l(a("Ivs8"))),B=(a("ydnR"),l(a("Bxz1")));function W(e){return function(){var t,a=(0,S.default)(e);if(K()){var l=(0,S.default)(this).constructor;t=Reflect.construct(a,arguments,l)}else t=a.apply(this,arguments);return(0,M.default)(this,t)}}function K(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var z=T.default.TreeNode,H=I.default.Item,O=x.default.Option,V=["error","success"],A=["oal.common.disable","oal.common.enable"],j=(w=(0,C.connect)(function(e){var t=e.setting,a=e.dashboard,l=e.loading;return{setting:t,dashboard:a,demoListLoading:l.effects["dashboard/fetchList"]}}),w((R=function(e){(0,k.default)(a,e);var t=W(a);function a(){var e;(0,v.default)(this,a);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n)),e.state={demoLoading:!0,treeData:[],selectedRows:[],formValues:{},page:{current:1,pageSize:10},nodeTreeItem:null},e.ref_leftDom=null,e.tree_loadData=function(){var t=e.props.dispatch;t({type:"dashboard/fetch"}).then(function(t){t&&t.res>0&&e.setState({demoLoading:!1,treeData:[{title:"Expand to load",key:"0"},{title:"Expand to load",key:"1"},{title:"Tree Node",key:"2",isLeaf:!0}]})}).catch(function(e){console.log(e)})},e.tree_onLoadData=function(t){return new Promise(function(a){t.props.children?a():setTimeout(function(){t.props.dataRef.children=[{title:"Child Node",key:"".concat(t.props.eventKey,"-0")},{title:"Child Node",key:"".concat(t.props.eventKey,"-1")}],e.setState({treeData:(0,y.default)(e.state.treeData)}),a()},1e3)})},e.tree_renderNodes=function(t){return t.map(function(t){return t.children?F.default.createElement(z,{title:t.title,key:t.key,dataRef:t},e.tree_renderNodes(t.children)):F.default.createElement(z,(0,b.default)({key:t.key},t,{dataRef:t}))})},e.tree_onMouseEnter=function(t){if(e.ref_leftDom&&(!e.state.nodeTreeItem||!e.state.nodeTreeItem.isEditing)){var a=e.ref_leftDom.getBoundingClientRect(),l=a.left,n=a.top,r=t.event.currentTarget.getBoundingClientRect(),o=r.left,d=r.width,s=r.top,i=o-l+d+e.ref_leftDom.scrollLeft,u=s-n,c=t.node.props,f=c.eventKey,m=c.dataRef;e.setState({nodeTreeItem:{nodeWidth:d,pageX:i,pageY:u,id:f,dataRef:m}})}},e.tree_handleAddSub=function(t){e.state.nodeTreeItem&&console.log("click add id :",e.state.nodeTreeItem.id)},e.tree_handleEditSub=function(t){e.state.nodeTreeItem&&(console.log("click edit id :",e.state.nodeTreeItem.id),e.setState({nodeTreeItem:(0,E.default)({},e.state.nodeTreeItem,{isEditing:!0})}))},e.tree_handleEditSubInput=function(t){e.state.nodeTreeItem&&(console.log("click edit value :",t.target.value),e.state.nodeTreeItem.dataRef.title=t.target.value,e.setState({nodeTreeItem:null,treeData:(0,y.default)(e.state.treeData)}))},e.tree_handleDeleteSub=function(t){e.state.nodeTreeItem&&console.log("click delete id :",e.state.nodeTreeItem.id)},e.tree_clearMenu=function(){e.setState({nodeTreeItem:null})},e.tree_onSelect=function(e,t){console.log("selectedKeys : ",e,t)},e.table_loadData=function(){var t=e.props.dispatch,a=e.state.page;t({type:"dashboard/fetchList",payload:(0,E.default)({},a)})},e.table_handleSelectRows=function(t){e.setState({selectedRows:t})},e.table_columns=function(){var e=function(e){var t=e.item;return F.default.createElement(p.default,{overlay:F.default.createElement(h.default,{onClick:function(e){var a=e.key;return console.log("Dropdown",a,t)}},F.default.createElement(h.default.Item,{key:"modify",disabled:0===t.state},F.default.createElement(N.FormattedMessage,{id:"oal.common.modify"})),F.default.createElement(h.default.Item,{key:"open",disabled:1===t.state},F.default.createElement(N.FormattedMessage,{id:"oal.common.enable"})),F.default.createElement(h.default.Item,{key:"close",disabled:0===t.state},F.default.createElement(N.FormattedMessage,{id:"oal.common.disable"})))},F.default.createElement("a",null,F.default.createElement(N.FormattedMessage,{id:"oal.common.more"}),F.default.createElement(g.default,{type:"down"})))},t=[{title:(0,N.formatMessage)({id:"oal.org.orgName"}),dataIndex:"name"},{title:(0,N.formatMessage)({id:"oal.common.status"}),dataIndex:"state",render:function(e){return F.default.createElement(m.default,{status:V[e],text:A[e]&&(0,N.formatMessage)({id:A[e]})||"-"})}},{title:(0,N.formatMessage)({id:"oal.org.path"}),dataIndex:"path",render:function(e,t){return F.default.createElement(F.Fragment,null,F.default.createElement("a",{onClick:function(){return console.log("path",t.path)}},t.path))}},{title:(0,N.formatMessage)({id:"oal.org.contacts"}),dataIndex:"contactName",render:function(e,t){return F.default.createElement("span",null,t&&t.contact&&t.contact.nickName||"-")}},{title:(0,N.formatMessage)({id:"oal.common.handle"}),width:150,render:function(t,a){return F.default.createElement(F.Fragment,null,F.default.createElement("a",{onClick:function(){return console.log("handle",a)}},F.default.createElement(N.FormattedMessage,{id:"oal.common.view"})),F.default.createElement(f.default,{type:"vertical"}),F.default.createElement(e,{item:a}))}}];return t},e.table_handleChange=function(t){e.props.dispatch;var a=e.state.formValues,l=(0,E.default)({current:t.current,pageSize:t.pageSize},a);console.log("table_handleChange",l)},e.table_handleSearch=function(){var t=e.props,a=t.form,l=(t.dispatch,e.state.page);a.validateFields(function(t,a){if(!t){e.setState({formValues:a,selectedRows:[]});var n=(0,E.default)({},l,a);console.log("table_handleSearch",n)}})},e.table_handleFormReset=function(){var t=e.props,a=t.form;t.dispatch;a.resetFields(),a.setFieldsValue({});var l=e.state.page;e.setState({formValues:{}});var n=(0,E.default)({},l,{pageNo:1});console.log("table_handleFormReset",n)},e.table_renderSimpleForm=function(){var t=e.props,a=t.form,l=t.loading,n=a.getFieldDecorator;return F.default.createElement(I.default,{layout:"inline"},F.default.createElement(s.default,{gutter:{md:4,lg:24,xl:48}},F.default.createElement(u.default,{xxl:5,xl:6,lg:8,md:8,sm:24},F.default.createElement(H,{label:(0,N.formatMessage)({id:"oal.org.orgName"})},n("name")(F.default.createElement(c.default,{placeholder:(0,N.formatMessage)({id:"oal.org.enterOrgName"})})))),F.default.createElement(u.default,{xxl:5,xl:6,lg:8,md:8,sm:24},F.default.createElement(H,{label:(0,N.formatMessage)({id:"oal.org.path"})},n("path")(F.default.createElement(c.default,{placeholder:(0,N.formatMessage)({id:"oal.org.enterPath"})})))),F.default.createElement(u.default,{xxl:5,xl:6,lg:8,md:8,sm:24},F.default.createElement(H,{label:(0,N.formatMessage)({id:"oal.common.status"})},n("state")(F.default.createElement(x.default,{placeholder:(0,N.formatMessage)({id:"oal.common.pleaseSelect"}),style:{width:"100%"}},F.default.createElement(O,{value:""},F.default.createElement(N.FormattedMessage,{id:"oal.common.all"})),F.default.createElement(O,{value:"0"},F.default.createElement(N.FormattedMessage,{id:"oal.common.disable"})),F.default.createElement(O,{value:"1"},F.default.createElement(N.FormattedMessage,{id:"oal.common.enable"})))))),F.default.createElement(u.default,{xxl:4,lg:4,md:4,sm:24},F.default.createElement("span",{className:B.default.submitButtons},F.default.createElement(i.default,{onClick:e.table_handleSearch,type:"primary",htmlType:"submit",loading:l},F.default.createElement(N.FormattedMessage,{id:"oal.common.query"})),F.default.createElement(i.default,{style:{marginLeft:8},onClick:e.table_handleFormReset},F.default.createElement(N.FormattedMessage,{id:"oal.common.reset"}))))))},e}return(0,_.default)(a,[{key:"componentDidMount",value:function(){this.tree_loadData(),this.table_loadData()}},{key:"componentWillUnmount",value:function(){this.tree_clearMenu()}},{key:"tree_getNodeTreeMenu",value:function(){if(this.state.nodeTreeItem){var e=(0,E.default)({},this.state.nodeTreeItem),t=e.pageX,a=e.pageY,l=e.isEditing,n=e.nodeWidth,r=e.dataRef,o={position:"absolute",maxHeight:40,textAlign:"center",left:"".concat(t+10-(l?n+10:0),"px"),top:"".concat(a,"px"),display:"flex",flexDirection:"row"},s=F.default.createElement("div",{style:o,onClick:function(e){return e.stopPropagation()}},l?F.default.createElement(c.default,{size:"small",defaultValue:r&&r.title||"",style:{width:"".concat(n,"px"),minWidth:"56px",marginRight:"10px"},autoFocus:!0,onBlur:this.tree_handleEditSubInput,onPressEnter:this.tree_handleEditSubInput}):"",F.default.createElement("div",{style:{alignSelf:"center",marginLeft:10,cursor:"pointer"},onClick:this.tree_handleEditSub},F.default.createElement(d.default,{placement:"bottom",title:(0,N.formatMessage)({id:"oal.common.modify"})},F.default.createElement(g.default,{type:"edit"}))),F.default.createElement("div",{style:{alignSelf:"center",marginLeft:10,cursor:"pointer"},onClick:this.tree_handleDeleteSub},F.default.createElement(d.default,{placement:"bottom",title:(0,N.formatMessage)({id:"oal.common.delete"})},F.default.createElement(g.default,{type:"minus-circle-o"}))),F.default.createElement("div",{style:{alignSelf:"center",marginLeft:10,cursor:"pointer"},onClick:this.tree_handleAddSub},F.default.createElement(d.default,{placement:"bottom",title:(0,N.formatMessage)({id:"oal.common.addItems"})},F.default.createElement(g.default,{type:"plus-circle-o"}))));return s}return""}},{key:"render",value:function(){var e=this,t=this.props,a=t.dashboard.demoList,l=t.demoListLoading;return F.default.createElement(L.PageHeaderWrapper,{className:B.default.myPageHeaderWrapper},F.default.createElement(r.default,{bordered:!1},F.default.createElement("div",{className:B.default.main},F.default.createElement("div",{className:B.default.left,ref:function(t){e.ref_leftDom=t},onClick:this.tree_clearMenu},F.default.createElement(o.default,{spinning:this.state.demoLoading}),F.default.createElement(T.default,{loadData:this.tree_onLoadData,showLine:!0,onMouseEnter:this.tree_onMouseEnter,onSelect:this.tree_onSelect},this.tree_renderNodes(this.state.treeData)),this.state.nodeTreeItem?this.tree_getNodeTreeMenu():""),F.default.createElement("div",{className:B.default.right},F.default.createElement("div",{className:B.default.tableListForm},this.table_renderSimpleForm()),F.default.createElement("div",{className:B.default.tableListOperator},F.default.createElement(i.default,{icon:"plus",type:"primary",onClick:function(){return console.log("plus")}},F.default.createElement(N.FormattedMessage,{id:"oal.common.new"}))),F.default.createElement(P.default,{rowKey:function(e){return e._id},needRowSelection:!1,selectedRows:this.state.selectedRows,loading:l,data:a,columns:this.table_columns(),onSelectRow:this.table_handleSelectRows,onChange:this.table_handleChange})))))}}]),a}(F.Component),D=R))||D),Y=I.default.create()(j);t.default=Y}}]);